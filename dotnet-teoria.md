# .NET

- **Histórico**
    - Ambiente de desenvolvimento ou plataforma lançada no ano 2000;
    - CLR - Common Language Runtime;
    - C#, VB.NET, J# - cada uma com um compilador -> vai para CLR que gera linguagem de máquina;
    - Xamarin - rodar em Android e iOS apps criados com C#;
    - 2014 - é criada a .NET Foundation para gestão de projetos open source;
    - 2015 - é lançado o C# 6.0 e o Visual Studio Code;
    - .NET Framework é passado!
    - 2016 - .NET Core 1.0 (.NET 5)- totalmente novo, open source e multiplataforma;
- **O que é .NET?**
    - É uma infraestrutura para desenvolvimento de software criada pela Microsoft.
    - É multiplataforma e open source.
    - Uma aplicação .NET é desenvolvida e roda em uma das seguintes implementações do .NET:
      - .NET Core (mais atual)
      - .NET Framework (obsoleto)
      - Mono
      - Universal Windows Plataform (UWP) - Xbox
    - .NET Standard Library - "contrato" para cada implementação.
    - Cada implementação contém um ou mais .NET Runtimes (ambientes de execução):
      - .NET Core: CoreCLR e CoreRT
      - .NET Framework: CLR (Common Language Runtime)
      - Mono: Mono Runtime
      - Universal Windows Plataform (UWP): .NET Native
    - Atualmente a Microsoft desenvolve e suporta 3 linguagens para .NET:
      - C# - foco em OOP
      - F# - foco em prog funcional
      - VB  
- **O que é o C#**
    - É uma linguagem fortemente tipada, orientada a objetos de sintaxe similar à do Java e do C++;
    - Os programas em C# são executados no .NET, que inclui:
    1. CLR (Common Language Runtime);
        - CLR é uma máquina virtual que fornece um ambiente de tempo de execução para o .NET framework.
    2. Conjunto Unificado de bibliotecas e classes;
        - Úteis para, por ex, ler um arquivo, data e hora ...
    - Atualmente o compilador do C# é o Roslyn, que é open source;
    - O código fonte escrito em C# é compilado em uma linguagem intermediária (IL).
    - O código e os recursos de IL são armazenados no disco em um executável (.exe ou .dll) chamado assembly
    - Ao executarmos o programa em C# o assembly é carregado no CLR.
    - O CLR executará a compilação just-in-time (JIT) para converter o código IL em intruções de máquina nativas (dotnet run faz isso).
    - O CLR fornece outros serviços tais como:
    - Garbage Collector
    - Exception Handler
    - Resources Manager
- **Principais conceitos organizacionais em C#**
    - Programas - arquivos .cs
    - namespaces - tipos contem membros que podem ser organizados em namespaces
    - tipos - classes, interfaces
    - membros - campos, metodos, propriedades e eventos por ex
    - assemblies - programas compilados sao empacotados em assemblies (.exe ou .dll)
    - O C# permite a criação de classes e métodos aninhados. 
- **namespace**
    - Geralmente usamos o nome do projeto como namespace de cada uma das classes.
    - Havendo uma estrutura de diretórios ela também influenciará no namespace.
    - Ex.: namespace NomeDoProjeto.MeuDiretorio
    	- para usar uma classe de dentro do dir MeuDiretorio: var s = new MeuDiretorio.Nomeclasse() ou cláusula using;
    	- no vscode clica na classe, ctrl + . para incluir a clausa de using
    - Funciona como um pacote. Dentro dele pode existir classes, membros etc
- **debug**
    - abra o projeto com: ctrl + k,  ctrl + o
    - marque um breakpoint numa linha de código e pressione F5.
    - pula para a próxima linha com F10
    - para entrar dentro do metodo executado na linha corrente pressione F11
    - para executar sem para até o fim: F5
    - passando o mouse sobre as variáveis conseguimos saber seus valores durante a execução
- **POO no .NET**
    - Tudo no .NET são objetos, até os tipos de dados são objetos pois contém métodos e propriedades.
    - Diagrama de classes, UML
    - Tipos em C#:
        - Por valor: mem gerenciada pelo C#
        - Por referência
    - Métodos
        - Getters - métodos acessores
        - Setters - métodos modificadores
        - Construct - sem retorno, é executado 1 só vez, deve ser public
    - Propriedades
        - São um par de metodos get e set
    - Eventos  
        - Mensagens que a classe dispara
        - Estrutura Delegate - delega variavel que guarda endereço da função que é disparada com o evento

# ASP.NET

- **.NET**
    - Framework criado pela microsoft voltado para o desenvolvimento web.
    - É diferente de .NET Framework que só funciona em windows - antigo.
    - Na versão 5 em diante chamamos de .NET. Em versões mais antigas chamamos .NET Core.
- **ASP.NET Core**
    - Estrutura da Web gratuita para a criação de sites e aplicativos Web.
- **Startup.cs**
  - É a classe inicial do projeto.
  - Responsável por ser o ponto inicial do projeto
  - Possui métodos para configurar o projeto: 
    - ConfigureServices: registra as classes ao conteiner de injeçao de dependencias
    - Configure: controla o pipeline da aplicaçao. Especifica middlewares que serão utilizados    
- **API**
    - Application Programming Interface - Interface de Programação de Aplicação.
    - É um sistema backend que faz requisições.
    - Alumas requisições: post, get, put e delete (Um CRUD).
    - POST - efetuar cadastros
    - GET - selecionar dados
    - PUT - alterar registros
    - DELETE - remover registros
    - (post, get, put e delete) lembram os comandos sql (insert, select, update e delete).
    - A estrutura da API consiste em:
    - Um cliente que faz a requisição para a API.
    - A API acessa o banco de dados.
    - O banco de dados retorna para a API as informações solicitadas.
    - A API retorna para o cliente em formato JSON ou XML.
- **Entity Framework Core**
    - É um ORM (Object Relational Mapper).
    - O ORM abstrai a camada de banco de dados.
    - O Entity Framework faz as interações com o banco (selects, inserts, updates e deletes) de dados sem que se precise criar códigos SQL.
    - Obs.: o Entity Framework aceita que utilizemos comandos SQL também.
    - É um ORM (Mapeamento Relacional de Objeto)
    - Permite usar banco de dados com objetos .NET
    - Linhas de utilização:
        - **Database First**: le banco de dados e carrega as classes que representarão as tabelas do banco
        - **Model First**: cria modelo com EDM designer para gerar a base de dados - Componentes: Entity e Association
        - **Code First**: criamos as classes (classes POCO) e deixamos o Entity Framework criar o banco de dados.
- **Estrutura do projeto**
    - *Controllers*
        - Responsáveis pelas rotas
    - *Startup.cs*
        - Possui um método ConfigureServices que pode efetuar a conexao com o banco de dados, especificar o uso da rota
- **NuGet**
    - Site: <https://www.nuget.org/>
    - É um gerenciador de pacotes.
- **Modelo**
    - Tem 2 funcionalidades:
    - Criar a tabela do banco de dados
    - Características do JSON
- **DataAnnotations**
    - Serve para especificar funcionalidades extra: 
    - Uso de chave primaria, algumas validações.
    - Recurso para adicionar atributos e métodos em classes para alterar convenções e personalizar comportamentos.
    - Principais Atributos:
        - Required:
        - RegularExpression: valida o campo por Regex
        - Display: nome a ser mostrado nas interfaces de usuário
        - StringLength: qtd máx de caract
        - MinLength: qtd min de caract
        - DisplayFormat: formato a ser exibido nas interfaces de usuario - datas
        - Range: faixa de dados aceita    
- **DataContext**
    - Classe responsável por trabalhar com comandos de banco de dados, Ex:
    - selecionar, alterar, cadastrar excluir.
    - Permite não utilizar comandos SQL
- **Migration**
    - Cria uma tabela no banco de dados utilizando como base um modelo. 
    - Doc Microsoft: <https://docs.microsoft.com/pt-br/ef/core/managing-schemas/migrations/?tabs=dotnet-core-cli>
    - Recurso para atualizar de forma incremental o esquema do banco de dados para manter em sincronia com o modelo de classes do projeto preservando os dados existentes no banco de dados.
    - Permite realizar o downgrade para retornar à versões anteriores do BD.
    - Mantém histórico de alterações no banco de dados.    
- **Async**
    - Se utilizarmos a palavra reservada await a linha ficará travada e as próximas linhas só serão executadas após terminar a execução da linha await.

### ASP.NET MVC

- **O padrão MVC**
    - É um padrão de arquitetura que divide a aplicação em 3 camadas: o modelo (**model**), a visão (**view**) e o controlador (**controller**).
    - Pode ser aplicado em projetos desktop, web e mobile.
    - Camadas:
        - Model: leitura, validação e escrita de dados
        - View: interações com usuário, exibe dados: HTML, XML
        - Controller: recebe todas requisições, controla qual model usar e qual view será mostrada ao usuário
- As requisições do navegador são enviadas para uma Ação da Controller tirando a necessidade de cada URL possuir um arquivo físico.
- **Routes**
    - Padrão de rota default para url: "{controller}/{action}/{id}"
    - defaults: controller=Home, action=Index, id=optional
- **Custom Routes**
    - URLs mais amigaveis ao usuario
- **Action Result** 
    - É o resultado de uma ação processada por uma controller, retorna a view que deverá ser exibida
- **HTTP Verbs**
    - São métodos do protocolo HTTP que informam ao servidor qual ação ele deverá executar:
    - GET: busca recurso
    - POST: cria recurso
    - PUT/PATCH: atualiza recurso
    - DELETE: remove recurso
- **Razor**
    - É uma view engine utilizada no ASP.NET MVC que simplifica o des. de aplic .NET
    - É baseado em C#
    - Visual Studio possui IntelliSense para razor - produtividade
- **Middlewares**
    - São componentes que são executadas em todas as solicitações na aplicação ASP.NET
    - Há vários em uma aplicação, nós definimos a ordem de execução
- **Swagger**
    - Auxiliar o desenvolvedor de API




